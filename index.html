<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/icon.svg" type="image/svg+xml" />
    <title>音视频转文字</title>
  </head>
  <body>
    <div id="app">
      <header class="header">
        <div class="title">音视频转文字</div>
        <div class="subtitle">飞书多维表格 · 火山引擎</div>
        <div class="tabs">
          <button class="tab active" data-page-target="transcribe">转写</button>
          <button class="tab" data-page-target="subscription">租户订阅</button>
          <button class="tab" data-page-target="terms">使用协议</button>
          <button class="tab" data-page-target="privacy">隐私政策</button>
        </div>
      </header>
      <div class="page" data-page="transcribe">
        <section class="panel">
          <div class="field">
            <label>附件字段</label>
            <select id="attachmentField"></select>
          </div>
          <div class="field">
            <label>写入字段</label>
            <select id="outputField"></select>
          </div>
          <div class="field">
            <label>语言</label>
            <select id="language">
              <option value="">自动识别</option>
              <option value="zh-CN">中文</option>
              <option value="en-US">英文</option>
              <option value="ja-JP">日语</option>
              <option value="ko-KR">韩语</option>
              <option value="fr-FR">法语</option>
              <option value="es-MX">西班牙语</option>
              <option value="pt-BR">葡萄牙语</option>
              <option value="ru-RU">俄语</option>
            </select>
          </div>
          <div class="field">
            <label>模型版本</label>
            <select id="modelVersion">
              <option value="">默认</option>
              <option value="400">400</option>
            </select>
          </div>
          <div class="field toggles">
            <label><input type="checkbox" id="enableItn" checked /> 数字规整</label>
            <label><input type="checkbox" id="enablePunc" checked /> 自动标点</label>
            <label><input type="checkbox" id="enableDdc" /> 语义顺滑</label>
            <label><input type="checkbox" id="showUtterances" /> 分句输出</label>
            <label><input type="checkbox" id="skipExistingOutput" checked /> 跳过已有文字</label>
          </div>
          <div class="actions">
            <button id="runButton">开始转写当前表</button>
          </div>
        </section>
        <section class="panel">
          <div class="status-title">运行状态</div>
          <div id="status" class="status">等待开始</div>
          <div id="progress" class="progress"></div>
        </section>
      </div>
      <section class="panel page hidden" data-page="subscription">
        <div class="status-title">订阅状态</div>
        <div id="subscriptionStatus" class="status">加载中</div>
        <div id="subscriptionDetail" class="subtitle"></div>
        <div class="field">
          <label>剩余试用次数</label>
          <div id="trialRemaining" class="status"></div>
        </div>
        <div class="field">
          <label>模型调用单价</label>
          <div id="modelUnitPrice" class="status"></div>
        </div>
        <div class="field">
          <label>今日使用时长(分钟)</label>
          <div id="modelUsageDailyMinutes" class="status"></div>
        </div>
        <div class="field">
          <label>今日费用</label>
          <div id="modelUsageDailyCost" class="status"></div>
        </div>
        <div class="field">
          <label>累计使用时长(分钟)</label>
          <div id="modelUsageCount" class="status"></div>
        </div>
        <div class="field">
          <label>累计模型费用</label>
          <div id="modelUsageCost" class="status"></div>
        </div>
        <div class="field">
          <label>当前租户标识</label>
          <div id="tenantBaseId" class="status"></div>
        </div>
        <div class="field">
          <label>开通方式</label>
          <div class="status">在线支付后自动开通</div>
        </div>
        <div class="field">
          <label>订阅方案</label>
          <div id="planList" class="plan-list"></div>
        </div>
      </section>
      <section class="panel page hidden" data-page="terms">
        <div class="status-title">使用协议</div>
        <div class="status">
          本插件仅用于对授权的音视频附件进行转写，不得用于侵犯他人合法权益的场景。
        </div>
        <div class="status">
          使用方应确保已获得音视频内容的合法授权，且对内容的使用、存储与分发承担全部责任。
        </div>
        <div class="status">
          服务方不对转写结果的准确性、完整性做保证，用户需自行校验。
        </div>
        <a id="termsLink" class="policy-link hidden" target="_blank" rel="noopener">查看完整使用协议</a>
      </section>
      <section class="panel page hidden" data-page="privacy">
        <div class="status-title">隐私政策</div>
        <div class="status">
          本插件仅处理用户主动选择的音视频附件及必要的字段信息，用于完成转写任务。
        </div>
        <div class="status">
          转写请求会发送至火山引擎语音识别服务，服务方不主动保存转写内容。
        </div>
        <div class="status">
          若需删除相关数据，请联系服务方进行处理。
        </div>
        <a id="privacyLink" class="policy-link hidden" target="_blank" rel="noopener">查看完整隐私政策</a>
      </section>
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
