# 优化清单

## 依据
- Express 生产性能与可靠性建议：避免同步函数、正确处理异常 ([来源](https://expressjs.com/en/advanced/best-practice-performance.html))
- Express 生产安全建议：安全头与输入校验等 ([来源](https://expressjs.com/en/advanced/best-practice-security.html))

## P0 立即优化
- [x] 后端：持久化写入改为异步队列，避免请求链路同步 I/O
- [x] 前端：轮询更新 logId，保证查询链路稳定
- [x] 前端：运行流程使用 try/finally，避免按钮无法恢复
- [x] 后端：统一错误处理中间件与响应格式

## P1 重要优化
- [x] 后端：计费仅基于已提交任务绑定的 baseId
- [x] 前端：订阅/用量请求错误捕获并反馈
- [x] 后端：补充基础安全响应头
- [x] 后端：补充输入参数校验
- [x] 前端：受控并发处理批量转写
- [x] 前端：文件格式与大小校验

## P2 中长期
- [x] 后端：拆分 server/index.js 按职责模块化
- [x] 前端：多附件处理策略与选择
- [x] 后端：统一日志与监控策略
